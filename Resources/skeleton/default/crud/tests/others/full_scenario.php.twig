
    protected $user;

    /**
     * {@inheritDoc}
     */
    public function prepareTest()
    {
        $this->purgeDatabase();
        $this->user = $this->makeEntity(User::class, [
            'username' => 'user',
        ]);
    }

    public function testCompleteScenario()
    {
        $this
            ->logIn($this->user)
            ->go('/{{ route_prefix }}')
            ->isOk()
            ->see('there is not record')

            ->click('New')
            ->isOk()
            ->submit('Create', [
                '{{ entity_class|lower }}[name]' => '{{ entity_class|lower }} test',
            ])
            ->isRedirect()
            ->see('The entity is saved.')
        ;
        $entity = $this->findEntity({{ entity_class }}::class, [
            'name' => '{{ entity_class|lower }} test',
        ]);
        $this
            ->itOn(sprintf('/{{ route_prefix }}/%s/edit', $entity->getId()))
            ->submit('Update', [
                '{{ entity_class|lower }}[name]' => '{{ entity_class|lower }} test update',
            ])
            ->isRedirect()
            ->see('The entity is saved.')
            ->itOn(sprintf('/{{ route_prefix }}/%s/edit', $entity->getId()))

            ->click('List')
            ->isOk()
            ->itOn('/{{ route_prefix }}')
            ->see('{{ entity_class|lower }} test update')
            ->notSee('there is not record')
        ;
    }
